(file (program (kindDeclaration (typesideAssignment typeside (typesideId (symbol Ty)) = (typesideExp literal { (typesideLiteralSection java_types (typesideJavaTypeSig (typesideTypeId (symbol String)) = (typesideJavaType "java.lang.String")) (typesideJavaTypeSig (typesideTypeId (symbol Nat)) = (typesideJavaType "java.lang.Integer")) (typesideJavaTypeSig (typesideTypeId (symbol Bool)) = (typesideJavaType "java.lang.Boolean")) (typesideJavaTypeSig (typesideTypeId (symbol NullableNat)) = (typesideJavaType "java.util.Optional")) java_constants (typesideJavaConstantSig (typesideConstantId String) = (typesideJavaConstantValue "return input[0]")) (typesideJavaConstantSig (typesideConstantId Nat) = (typesideJavaConstantValue "return java.lang.Integer.parseInt(input[0])")) (typesideJavaConstantSig (typesideConstantId Bool) = (typesideJavaConstantValue "return java.lang.Boolean.parseBool(input[0])")) (typesideJavaConstantSig (typesideConstantId NullableNat) = (typesideJavaConstantValue "return java.lang.Integer.parseInt(input[0])")) java_functions (typesideJavaFunctionSig (typesideFnName (symbol null)) : -> (typesideFnTarget (symbol NullableNat)) = (typesideJavaStatement "return java.util.Optional.empty()")) (typesideJavaFunctionSig (typesideFnName (symbol inNat)) : (typesideFnLocal (symbol Nat)) -> (typesideFnTarget (symbol NullableNat)) = (typesideJavaStatement "return java.util.Optional.of(input[0])")) (typesideJavaFunctionSig (typesideFnName (symbol eqNat)) : (typesideFnLocal (symbol Nat)) , (typesideFnLocal (symbol Nat)) -> (typesideFnTarget (symbol Bool)) = (typesideJavaStatement "return (input[0].equals(input[1]))")) (typesideJavaFunctionSig (typesideFnName (symbol ifNat)) : (typesideFnLocal (symbol Bool)) , (typesideFnLocal (symbol NullableNat)) , (typesideFnLocal (symbol NullableNat)) -> (typesideFnTarget (symbol NullableNat)) = (typesideJavaStatement "if (input[0]) { return input[1]; } else { return input[2]; }")) allOptions) }))) (kindDeclaration (schemaAssignment schema (schemaId (symbol S)) = (schemaExp literal : (typesideKind (typesideRef (symbol Ty))) { (schemaLiteralSection entities (schemaEntityId (symbol A)) (schemaEntityId (symbol B)) attributes (schemaAttributeSig (schemaAttributeId (symbol Aname)) : (schemaEntityId (symbol A)) -> (typesideTypeId (symbol String))) (schemaAttributeSig (schemaAttributeId (symbol Bname)) : (schemaEntityId (symbol B)) -> (typesideTypeId (symbol String))) (schemaAttributeSig (schemaAttributeId (symbol Aid)) : (schemaEntityId (symbol A)) -> (typesideTypeId (symbol Nat))) (schemaAttributeSig (schemaAttributeId (symbol Bid)) : (schemaEntityId (symbol B)) -> (typesideTypeId (symbol Nat))) allOptions) }))) (kindDeclaration (schemaAssignment schema (schemaId (symbol T)) = (schemaExp literal : (typesideKind (typesideRef (symbol Ty))) { (schemaLiteralSection entities (schemaEntityId (symbol C)) attributes (schemaAttributeSig (schemaAttributeId (symbol CAname)) : (schemaEntityId (symbol C)) -> (typesideTypeId (symbol String))) (schemaAttributeSig (schemaAttributeId (symbol CBname)) : (schemaEntityId (symbol C)) -> (typesideTypeId (symbol String))) (schemaAttributeSig (schemaAttributeId (symbol Cid)) : (schemaEntityId (symbol C)) -> (typesideTypeId (symbol NullableNat))) allOptions) }))) (kindDeclaration (queryAssignment query (queryId (symbol OuterJoin)) = (queryExp literal : (schemaKind (schemaRef (symbol S))) -> (schemaRef (symbol T)) { (queryLiteralSection entity (queryEntityExpr (schemaEntityId (symbol C)) -> { (queryClauseExpr from (queryClauseFrom (queryGen (symbol a)) : (schemaEntityId (symbol A))) (queryClauseFrom (queryGen (symbol b)) : (schemaEntityId (symbol B))) attributes (queryPathMapping (queryGen (symbol Cid)) -> (queryPath (queryGen (symbol ifNat)) ( (queryPath (queryGen (symbol eqNat)) ( (queryPath (queryGen (symbol a)) . (schemaArrowId (schemaEntityId (symbol Aid)))) , (queryPath (queryGen (symbol b)) . (schemaArrowId (schemaEntityId (symbol Bid)))) )) , (queryPath (queryGen (symbol inNat)) ( (queryPath (queryGen (symbol a)) . (schemaArrowId (schemaEntityId (symbol Aid)))) )) , (queryPath (typesideConstantId null)) ))) (queryPathMapping (queryGen (symbol CAname)) -> (queryPath (queryGen (symbol a)) . (schemaArrowId (schemaEntityId (symbol Aname))))) (queryPathMapping (queryGen (symbol CBname)) -> (queryPath (queryGen (symbol b)) . (schemaArrowId (schemaEntityId (symbol Bname))))) allOptions) }) allOptions) }))) (kindDeclaration (instanceAssignment instance (instanceId (symbol I)) = (instanceExp literal : (schemaKind (schemaRef (symbol S))) { (instanceLiteralSection generators (instanceLiteralGen (instanceGen (symbol a1)) (instanceGen (symbol a2)) : (schemaEntityId (symbol A))) (instanceLiteralGen (instanceGen (symbol b2)) (instanceGen (symbol b3)) : (schemaEntityId (symbol B))) equations (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol a1)))) . (instanceArrowId (schemaEntityId (symbol Aname)))) = (instanceEquationValue (instancePath (instanceArrowId (schemaEntityId (symbol alice)))))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol a1)))) . (instanceArrowId (schemaEntityId (symbol Aid)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "1")))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol a2)))) . (instanceArrowId (schemaEntityId (symbol Aname)))) = (instanceEquationValue (instancePath (instanceArrowId (schemaEntityId (symbol bob)))))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol a2)))) . (instanceArrowId (schemaEntityId (symbol Aid)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "2")))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol b2)))) . (instanceArrowId (schemaEntityId (symbol Bname)))) = (instanceEquationValue (instancePath (instanceArrowId (schemaEntityId (symbol charlie)))))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol b2)))) . (instanceArrowId (schemaEntityId (symbol Bid)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "2")))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol b3)))) . (instanceArrowId (schemaEntityId (symbol Bname)))) = (instanceEquationValue (instancePath (instanceArrowId (schemaEntityId (symbol dave)))))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol b3)))) . (instanceArrowId (schemaEntityId (symbol Bid)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "3")))) allOptions) }))) (kindDeclaration (instanceAssignment instance (instanceId (symbol J)) = (instanceExp eval (queryKind (queryRef (symbol OuterJoin))) (instanceKind (instanceRef (symbol I)))))) (kindDeclaration (schemaAssignment schema (schemaId (symbol Sx)) = (schemaExp literal : (typesideKind (typesideExp sql)) { (schemaLiteralSection entities (schemaEntityId (symbol Left)) (schemaEntityId (symbol Right)) (schemaEntityId (symbol Middle)) foreign_keys (schemaForeignSig (schemaForeignId (symbol f)) : (schemaEntityId (symbol Left)) -> (schemaEntityId (symbol Middle))) (schemaForeignSig (schemaForeignId (symbol g)) : (schemaEntityId (symbol Right)) -> (schemaEntityId (symbol Middle))) attributes (schemaAttributeSig (schemaAttributeId (symbol attL)) : (schemaEntityId (symbol Left)) -> (typesideTypeId (symbol Varchar))) (schemaAttributeSig (schemaAttributeId (symbol attR)) : (schemaEntityId (symbol Right)) -> (typesideTypeId (symbol Varchar))) (schemaAttributeSig (schemaAttributeId (symbol attM)) : (schemaEntityId (symbol Middle)) -> (typesideTypeId (symbol Varchar))) allOptions) }))) (kindDeclaration (instanceAssignment instance (instanceId (symbol Ix)) = (instanceExp literal : (schemaKind (schemaRef (symbol Sx))) { (instanceLiteralSection generators (instanceLiteralGen (instanceGen (symbol l1)) (instanceGen (symbol l2)) (instanceGen (symbol l3)) (instanceGen (symbol l4)) : (schemaEntityId (symbol Left))) (instanceLiteralGen (instanceGen (symbol r1)) (instanceGen (symbol r2)) : (schemaEntityId (symbol Right))) (instanceLiteralGen (instanceGen (symbol m1)) : (schemaEntityId (symbol Middle))) equations (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l1)))) . (instanceArrowId (schemaEntityId (symbol f)))) = (instanceEquationValue (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l2)))) . (instanceArrowId (schemaEntityId (symbol f)))))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l2)))) . (instanceArrowId (schemaEntityId (symbol f)))) = (instanceEquationValue (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol r1)))) . (instanceArrowId (schemaEntityId (symbol g)))))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l3)))) . (instanceArrowId (schemaEntityId (symbol f)))) = (instanceEquationValue (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol r2)))) . (instanceArrowId (schemaEntityId (symbol g)))))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l1)))) . (instanceArrowId (schemaEntityId (symbol attL)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "Bob")))) (instanceEquation (instancePath (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l1)))) . (instanceArrowId (schemaEntityId (symbol f)))) . (instanceArrowId (schemaEntityId (symbol attM)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "5")))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l2)))) . (instanceArrowId (schemaEntityId (symbol attL)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "Carl")))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l3)))) . (instanceArrowId (schemaEntityId (symbol attL)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "Alice")))) (instanceEquation (instancePath (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l3)))) . (instanceArrowId (schemaEntityId (symbol f)))) . (instanceArrowId (schemaEntityId (symbol attM)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "10")))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol r1)))) . (instanceArrowId (schemaEntityId (symbol attR)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "Happy")))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol r2)))) . (instanceArrowId (schemaEntityId (symbol attR)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "Sad")))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol m1)))) . (instanceArrowId (schemaEntityId (symbol attM)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "7")))) (instanceEquation (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l4)))) . (instanceArrowId (schemaEntityId (symbol attL)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "Dave")))) (instanceEquation (instancePath (instancePath (instancePath (instanceArrowId (schemaEntityId (symbol l4)))) . (instanceArrowId (schemaEntityId (symbol f)))) . (instanceArrowId (schemaEntityId (symbol attM)))) = (instanceEquationValue (instanceLiteral (instanceLiteralValue "6")))) allOptions) }))) (kindDeclaration (schemaAssignment schema (schemaId (symbol Helper)) = (schemaExp literal : (typesideKind (typesideExp sql)) { (schemaLiteralSection entities (schemaEntityId (symbol Joiner)) (schemaEntityId (symbol Left)) foreign_keys (schemaForeignSig (schemaForeignId (symbol h)) : (schemaEntityId (symbol Joiner)) -> (schemaEntityId (symbol Left))) attributes (schemaAttributeSig (schemaAttributeId (symbol attL)) : (schemaEntityId (symbol Left)) -> (typesideTypeId (symbol Varchar))) (schemaAttributeSig (schemaAttributeId (symbol attR)) : (schemaEntityId (symbol Joiner)) -> (typesideTypeId (symbol Varchar))) (schemaAttributeSig (schemaAttributeId (symbol attM)) : (schemaEntityId (symbol Joiner)) -> (typesideTypeId (symbol Varchar))) allOptions) }))) (kindDeclaration (queryAssignment query (queryId (symbol findJoin)) = (queryExp literal : (schemaKind (schemaRef (symbol Sx))) -> (schemaRef (symbol Helper)) { (queryLiteralSection entity (queryEntityExpr (schemaEntityId (symbol Joiner)) -> { (queryClauseExpr from (queryClauseFrom (queryGen (symbol l)) : (schemaEntityId (symbol Left))) (queryClauseFrom (queryGen (symbol r)) : (schemaEntityId (symbol Right))) where (queryClauseWhere (queryPath (queryGen (symbol l)) . (schemaArrowId (schemaEntityId (symbol f)))) = (queryPath (queryGen (symbol r)) . (schemaArrowId (schemaEntityId (symbol g))))) attributes (queryPathMapping (queryGen (symbol attM)) -> (queryPath (queryGen (symbol l)) . (schemaArrowId (schemaEntityId (symbol f))) . (schemaArrowId (schemaEntityId (symbol attM))))) (queryPathMapping (queryGen (symbol attR)) -> (queryPath (queryGen (symbol r)) . (schemaArrowId (schemaEntityId (symbol attR))))) foreign_keys (queryForeignSig (schemaForeignId (symbol h)) -> { (queryPathMapping (queryGen (symbol l)) -> (queryPath (typesideConstantId l))) }) allOptions) }) entity (queryEntityExpr (schemaEntityId (symbol Left)) -> { (queryClauseExpr from (queryClauseFrom (queryGen (symbol l)) : (schemaEntityId (symbol Left))) attributes (queryPathMapping (queryGen (symbol attL)) -> (queryPath (queryGen (symbol l)) . (schemaArrowId (schemaEntityId (symbol attL))))) allOptions) }) allOptions) }))) (kindDeclaration (schemaAssignment schema (schemaId (symbol Landing)) = (schemaExp literal : (typesideKind (typesideExp sql)) { (schemaLiteralSection entities (schemaEntityId (symbol Result)) attributes (schemaAttributeSig (schemaAttributeId (symbol attL)) : (schemaEntityId (symbol Result)) -> (typesideTypeId (symbol Varchar))) (schemaAttributeSig (schemaAttributeId (symbol attM)) : (schemaEntityId (symbol Result)) -> (typesideTypeId (symbol Varchar))) (schemaAttributeSig (schemaAttributeId (symbol attR)) : (schemaEntityId (symbol Result)) -> (typesideTypeId (symbol Varchar))) allOptions) }))) (kindDeclaration (mappingAssignment mapping (mappingId (symbol AddItUp)) = (mappingExp literal : (schemaRef (symbol Helper)) -> (schemaRef (symbol Landing)) { (mappingLiteralSection (mappingLiteralSubsection entity (mappingEntitySig (schemaEntityId (symbol Joiner)) -> (schemaEntityId (symbol Result))) foreign_keys (mappingForeignSig (schemaForeignId (symbol h)) -> (schemaPath (schemaArrowId (schemaEntityId (symbol Result))))) attributes (mappingAttributeSig (schemaAttributeId (symbol attM)) -> (mappingAttributeTerm (schemaPath (schemaArrowId (schemaEntityId (symbol attM)))))) (mappingAttributeSig (schemaAttributeId (symbol attR)) -> (mappingAttributeTerm (schemaPath (schemaArrowId (schemaEntityId (symbol attR))))))) (mappingLiteralSubsection entity (mappingEntitySig (schemaEntityId (symbol Left)) -> (schemaEntityId (symbol Result))) attributes (mappingAttributeSig (schemaAttributeId (symbol attL)) -> (mappingAttributeTerm (schemaPath (schemaArrowId (schemaEntityId (symbol attL))))))) allOptions) }))) (kindDeclaration (instanceAssignment instance (instanceId (symbol Joined)) = (instanceExp eval (queryKind (queryRef (symbol findJoin))) (instanceKind (instanceRef (symbol Ix)))))) (kindDeclaration (instanceAssignment instance (instanceId (symbol OuterJoinx)) = (instanceExp sigma (mappingKind (mappingRef (symbol AddItUp))) (instanceKind (instanceRef (symbol Joined))))))) <EOF>)